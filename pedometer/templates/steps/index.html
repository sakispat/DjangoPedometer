{% extends 'base.html' %}

{% block content %}
	<h1 class="display-4 text-center">Pedometer</h1>

	<canvas id="steps" data-url="chart"></canvas>

	<form action="." class="form" method="POST">
		<div class="container">
			<div class="row">
				{% csrf_token %}
				<div class="col">
					<label for="dateform" class="col-from-label">From Date: </label>
					<input type="date" name="datefrom" id="dateform" class="form-contol" value="01-01-2020">
				</div>
				<div class="col">
					<label for="dateto" class="col-from-label">To Date: </label>
					<input type="date" name="dateto" id="dateto" class="form-contol" value="01-01-2025">
				</div>
				<div class="col">
					<input type="submit" class="btn btn-primary" name="Send">
				</div>
			</div>
		</div>
	</form>

	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
	
	<script>
		$(function(){
	      var $steps = $("#steps");
	      	$.ajax({
	        	url: $steps.data("url"),
	        	success: function (data) {
	          		var ctx = $steps[0].getContext("2d");
		          	new Chart(ctx, {
		            	type: 'bar',
		           	 	data: {
		              		labels: data.days,
		              		datasets: [{
		                		label: 'Steps',
		                		backgroundColor: 'blue',
		                		data: data.steps
		              		}]          
		            	},
		            	options: {
		              		responsive: true,
		              		legend: { position: 'top', },
		              		title: {
		                		display: true,
		                		text: 'Steps Bar Chart'
		              		}
		            	}
		          	});
	        	}
	      	});
	    });
	</script>
{% endblock %}